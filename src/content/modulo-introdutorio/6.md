## Como a Web funciona?

### **Clientes e servidores**

Computadores conectados à web são chamados **clientes** e **servidores**. Um diagrama simplificado de como eles interagem pode ter essa aparência:

![](https://developer.mozilla.org/pt-BR/docs/Learn_web_development/Getting_started/Web_standards/How_the_web_works/simple-client-server.png)

- **Clientes** são os típicos dispositivos conectados à internet dos usuários da web (por exemplo, seu computador conectado ao seu Wi-Fi ou seu telefone conectado à sua rede móvel) e programas de acesso à Web disponíveis nesses dispositivos (geralmente um navegador como Firefox ou Chrome).
- **Servidores** são computadores que armazenam páginas, sites ou aplicativos. Quando o dispositivo de um cliente quer acessar uma página, uma cópia dela é baixada do servidor para a máquina do cliente para ser apresentada no navegador web do usuário.
    - **Servidor Web: O Anfitrião da Informação**
        
        Um **servidor web** é um software (aplicação) e/ou um hardware (computador) que armazena os arquivos de um website (HTML, CSS, JavaScript, imagens, vídeos, etc.) e os disponibiliza para os clientes (navegadores) através do protocolo HTTP.
        
        **Componentes de um Servidor Web:**
        
        - **Hardware:** Um computador com uma conexão de internet estável e capacidade de processamento e armazenamento suficientes para lidar com as requisições dos clientes. Servidores web geralmente são máquinas robustas e dedicadas.
        - **Software (Servidor HTTP):** A aplicação que realmente recebe as requisições HTTP dos clientes, processa-as e envia as respostas de volta. Alguns exemplos populares de software de servidor web são:
            - **Apache HTTP Server:** Um dos servidores web mais utilizados e robustos.
            - **Nginx:** Outro servidor web de alta performance, conhecido por sua eficiência e capacidade de lidar com um grande número de conexões simultâneas.
            - **Microsoft IIS (Internet Information Services):** O servidor web da Microsoft, integrado com o sistema operacional Windows Server.
            - **Node.js:** Embora seja um ambiente de execução JavaScript, pode ser usado para criar servidores web utilizando módulos como `http` ou frameworks como Express.js.

### **As outras partes da caixa de ferramentas**

O cliente e o servidor que descrevemos acima não contam toda a história. Existem muitas outras partes envolvidas, e vamos descrevê-las abaixo.

Por enquanto, vamos imaginar que a web é uma estrada. Em um extremo da estrada, temos o cliente, que é como sua casa. No extremo oposto, temos o servidor, que é como uma loja onde você quer comprar algo.

![](https://developer.mozilla.org/pt-BR/docs/Learn_web_development/Getting_started/Web_standards/How_the_web_works/road.jpg)

Além do cliente e do servidor, também precisamos conhecer:

- **Sua conexão de Internet**: permite que você mande e receba dados na web. É basicamente como a rua entre sua casa e a loja.
- **DNS**: Servidor de Nome de Domínio (*Domain Name Servers*) são como um catálogo de endereços para sites. Quando você digita um endereço web no seu navegador, o navegador procura no servidor de DNS para localizar o endereço real do site, antes que ele possa recuperar o site. O navegador precisa encontrar em qual servidor web a página está hospedada para que ele possa mandar mensagens HTTP ao lugar certo. Isso é como pesquisar o endereço da loja para que você possa entrar em contato.
    - **DNS explicado**
        
        Endereços web verdadeiros não são sequências de textos boas e fáceis de lembrar que você digita na sua barra de endereços para encontrar seus sites favoritos. Eles são números especiais que se parecem com isso: `63.245.215.20`.
        
        Isso é chamado **endereço IP** e representa um local único na web. No entanto, não é muito fácil de lembrar, é? É por isso que o **DNS** foi inventado. Esses são servidores especiais que relacionam o endereço da web que você digita no seu navegador com o endereço real do site (IP). Sites podem ser acessados diretamente pelo seu endereço IP. Você pode encontrar o endereço IP de um site digitando seu domínio em uma ferramenta como o [DNS lookup](https://www.nslookup.io/website-to-ip-lookup/).
        
- **HyperText:** São documentos (páginas web) contendo links (hiperlinks) que conectam a outros documentos. Essa capacidade de "saltar" entre informações é a essência da "teia". A linguagem fundamental para criar esses documentos é o **HTML (HyperText Markup Language)**.
- **HTTP**: Protocolo de Transferência de Hypertexto (*Hypertext Transfer Protocol*) é um protocolo de aplicação que define uma linguagem para clientes e servidores se comunicarem entre si. 
O HTTP é um protocolo de requisição-resposta, o que significa que a comunicação sempre começa com um cliente (seu navegador) enviando uma **requisição** para um servidor, e o servidor, por sua vez, envia uma **resposta** de volta.
    - **Grupos de respostas HTTP (do servidor para o cliente):**
        
        Quando o servidor recebe uma requisição, ele processa-a e envia uma resposta de volta ao cliente. Uma resposta HTTP possui um **código de status:** Um código numérico de três dígitos que indica o resultado da requisição. Os códigos são agrupados em categorias:
        
        - **1xx (Informacional):** Requisição recebida e sendo processada.
        - **2xx (Sucesso):** A requisição foi bem-sucedida.
        - **3xx (Redirecionamento):** O cliente precisa realizar outra ação para completar a requisição (ex: `301 Moved Permanently` indica que o recurso foi movido para outra URL).
        - **4xx (Erro do cliente):** Indica erro do lado do cliente (ex: `404 Not Found` indica que o recurso solicitado não foi encontrado [página não existe], `400 Bad Request` indica que a sintaxe da requisição estava incorreta).
        - **5xx (Erro do servidor):** O servidor entendeu a requisição, mas encontrou um erro ao processá-la (ex: `500 Internal Server Error` indica um erro genérico do servidor).

### **Mas e o TCP/IP?**

Agora que já entendemos a ideia básica de como a internet permite a comunicação entre computadores, é hora de falar sobre o que realmente faz tudo isso acontecer de forma tão eficiente. Essa troca de informações não seria possível sem um conjunto de protocolos que define como os dados devem ser enviados, recebidos e interpretados. Esses protocolos são conhecidos como **TCP/IP**, e eles são componentes base da internet moderna, garantindo que toda essa comunicação funcione de maneira rápida, confiável e segura.

Primeiro, temos o **Protocolo IP (*Internet Protocol*)**. Ele funciona como um organizador, dividindo as informações em pequenos pacotes, cada um contendo uma parte do dado completo. O IP é responsável por atribuir um **endereço IP** único a cada dispositivo na rede. Imagine que você está acessando um site: o IP divide os dados em pacotes e faz com que eles sejam enviados pela rede, garantindo que cada um encontre o caminho até o computador que solicitou essas informações.

Basicamente, quando os dados são enviados pela web, eles são enviados como milhares de pequenos blocos, para que muitos usuários diferentes possam baixar o mesmo site ao mesmo tempo. Se os websites fossem enviados como um grande bloco, somente um usuário por vez poderia baixá-los, o que, obviamente, tornaria a web muito ineficiente e não muito divertida de usar.

Mas não é só o IP que faz esse trabalho. O **Protocolo TCP (*Transmission Control Protocol*)** também desempenha um papel fundamental. Ele é como o "guardião" da comunicação, responsável por garantir que todos os pacotes cheguem ao destino final de forma correta e na ordem certa. Caso algum pacote se perca no caminho, o **TCP** identifica o problema e pede que o pacote seja reenviado, evitando que você receba uma página da internet incompleta ou com erros.

![Um diagrama de como o modelo TCP/IP divide os dados em pacotes e os envia por 4 camadas diferentes.](https://lwfiles.mycourse.app/escolalinux-public/106766ddf46ca35755d44887af9485ce.png)

Um diagrama de como o modelo TCP/IP divide os dados em pacotes e os envia por 4 camadas diferentes.

O modelo TCP/IP funciona porque todo o processo é padronizado. Sem padronização, a comunicação seria confusa e lenta, e o serviço rápido de internet depende da eficiência. Essa parceria entre o **IP** e o **TCP** é o que permite que a internet funcione de maneira tão harmoniosa. Como padrão global, o modelo TCP/IP é uma das formas mais eficientes de **transferência de arquivos** pela internet.

Agora que chegou até aqui, vamos explorar a parte mais técnica do conteúdo para entender como as camadas que compõem o **TCP/IP** trabalham juntas para garantir a integridade e eficiência da troca de dados. O TCP/IP tem sua organização em **quatro camadas**:

**1. Camada de Aplicação**: “O que o usuário realmente usa.”

- Aqui estão os protocolos que interagem diretamente com os aplicativos, como HTTP para navegação na web, SMTP para e-mail, FTP para transferência de arquivos, etc. Essa camada lida com a comunicação processo-a-processo.

**2. Camada de Transporte**: “Como os dados vão viajar.”

- Fornece serviços para a camada de aplicação, garantindo a entrega dos dados de forma confiável ou não confiável, dependendo da necessidade.
    - **TCP**: confiável (corrige erros, garante entrega).
    - **UDP**: rápido, mas sem garantias (usado em vídeos ao vivo, jogos online).

**3. Camada de Internet**: “Para onde os dados precisam ir.”

- Aqui, o principal protocolo é o IP, responsável por endereçar e rotear pacotes de dados entre redes. Ele fragmenta os dados da camada de transporte em pacotes e os envia pela rede.

**4. Camada de Enlace ou Acesso a Rede**: “Como os dados saem do seu dispositivo até a rede.”

- É a camada mais baixa e lida com a interface física com a rede e a transmissão de dados entre dois dispositivos diretamente conectados. Os protocolos aqui variam dependendo do tipo de rede física utilizada (Ethernet, Wi-Fi, etc.).

Em resumo, o modelo TCP/IP organiza a comunicação em rede em quatro camadas distintas, cada uma com um conjunto específico de protocolos e responsabilidades, permitindo a troca de dados entre diferentes dispositivos e redes de forma padronizada e eficiente.

### **Então, o que acontece, exatamente?**

Quando você digita um endereço da web no seu navegador:

1. O navegador vai para o servidor de DNS e encontra o endereço verdadeiro de onde o site está hospedado.
2. O navegador manda uma mensagem de requisição HTTP para o servidor, pedindo que envie uma cópia do site ao cliente. Esta mensagem e todos os outros dados enviados entre o cliente e o servidor são enviados pela sua conexão à internet usando TCP/IP.
    
    ```vbnet
    GET / HTTP/1.1
    Host: [www.google.com](http://www.google.com/)
    ```
    
    Se for uma requisição HTTPS, antes de enviar a requisição HTTP propriamente dita, ocorre um processo de **handshake TLS/SSL** para estabelecer uma conexão segura e criptografada. Isso envolve a troca de certificados e a negociação de algoritmos de criptografia.
    
    Uma requisição HTTP contém várias partes importantes, uma delas é o **método HTTP,** que indica a ação que o cliente deseja que o servidor realize com o recurso identificado na URL. Os métodos mais comuns são:
    
    - **GET:** Solicita a recuperação de um recurso específico (a maioria das páginas web e outros arquivos são solicitados com GET).
    - **POST:** Envia dados para o servidor para criar um novo recurso (ex: enviar um formulário).
    - **Nota:** Abrir uma única página web moderna geralmente envolve múltiplas requisições HTTP (ou HTTPS) do seu navegador para o servidor (ou para diversos servidores). Isso ocorre porque as páginas web raramente são um único arquivo autocontido.
        
        Os desenvolvedores web se esforçam para otimizar o número de requisições que uma página faz, pois cada requisição adiciona overhead (tempo de conexão, transferência de cabeçalhos, etc.) e pode afetar a velocidade de carregamento da página. Técnicas de otimização incluem:
        
        - **Minificação e compressão de arquivos:** Reduzir o tamanho dos arquivos HTML, CSS e JavaScript.
        - **Combinação de arquivos:** Juntar vários arquivos CSS ou JavaScript em um único arquivo para reduzir o número de requisições.
        - **Caching:** Configurar o servidor para que os navegadores armazenem em cache recursos estáticos, evitando requisições repetidas.
3. O servidor recebe e processa a requisição, que pode envolver:
    - **Buscar um arquivo estático:** Se o recurso solicitado for um arquivo HTML, CSS, JavaScript, imagem, etc., o servidor o localiza no seu sistema de arquivos.
    - **Executar um script no servidor:** Se a página for dinâmica, o servidor pode executar código (em linguagens como Python, PHP, Java, Node.js) para gerar o conteúdo HTML da resposta. Isso pode envolver acessar bancos de dados, realizar cálculos, etc.
4. Após processar a requisição, o servidor web constrói uma **resposta HTTP** (ou HTTPS) "200 OK", que significa "Claro que você pode ver esse site! Aqui está." e então começa a enviar os arquivos do site para o navegador como uma série de pequenos pedaços chamados pacotes de dados (a loja dá a você as suas mercadorias e você as traz para sua casa). 
    
    A resposta inclui:
    
    - A **versão do HTTP** e um **código de status** que indica o resultado da requisição (ex: `200 OK` para sucesso, `404 Not Found` para recurso não encontrado).
    - **Cabeçalhos HTTP** que fornecem informações sobre a resposta, como o tipo de conteúdo (Content-Type: `text/html`, `application/json`, `image/jpeg`), o tamanho do conteúdo (Content-Length), informações sobre cookies (Set-Cookie), etc.
    - O **corpo da mensagem**, que contém o conteúdo solicitado (o código HTML da página web, os dados JSON, a imagem, etc.).
    
    ```vbnet
    HTTP/1.1 200 OK
    Date: Sun, 27 Apr 2025 15:18:00 GMT
    Content-Length: 4660
    Content-Type: text/html; charset=UTF-8
    Connection: close
    
    <html> ...
    ```
    
5. O navegador monta os pequenos pedaços em um site completo e o mostra a você.