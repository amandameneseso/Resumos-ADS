# Desenvolvimento de site: JavaScript

## 1. JavaScript

### 1.1 Hist√≥ria do JavaScript

- O JavaScript **surgiu em** **1995**, projetado pelo cientista da computa√ß√£o Brendan Eich e a equipe que desenvolveu o navegador Netscape.
- A linguagem passou por diversos nomes, como Mocha e Livescript, antes de se tornar JavaScript.
- O nome JavaScript n√£o tem rela√ß√£o com a linguagem Java; a semelhan√ßa se deu por uma jogada de marketing para aproveitar a popularidade do Java.
- Sua ado√ß√£o pelo Netscape foi revolucion√°ria, resolvendo problemas de navega√ß√£o. A Microsoft adaptou sua pr√≥pria vers√£o, o JScript, para o Internet Explorer. Ambas as vers√µes competiram at√© 1997. Tanto o Netscape quanto o Internet Explorer foram desenvolvidos baseados no mesmo c√≥digo fonte de um navegador chamado Mosaic.
- Em 1997, foi criada uma **vers√£o padronizada do JavaScript chamada ECMAScript**, mantida pela empresa ECMA, para que os desenvolvedores n√£o precisassem criar c√≥digos espec√≠ficos para cada navegador.
- JavaScript, JScript e ECMAScript referem-se √† mesma linguagem; ECMAScript √© o padr√£o, e as outras s√£o variantes que respeitam esse padr√£o com pequenas modifica√ß√µes.

### 1.2 Para que serve o Javascript

- **Contexto**: Antes do JavaScript, as p√°ginas web eram est√°ticas, e qualquer intera√ß√£o ou mudan√ßa de conte√∫do exigia comunica√ß√£o com o servidor, o que era lento devido √†s conex√µes dom√©sticas da √©poca (modem de 28,8 kbps).
- **Fun√ß√£o revolucion√°ria**: O JavaScript foi a **primeira linguagem a atuar dentro do navegador do cliente**, utilizando processamento local. Isso permitiu realizar pequenas tarefas sem necessidade de nova informa√ß√£o do servidor, diminuindo a troca de informa√ß√µes e resultando em navega√ß√£o mais fluida para o cliente e menos solicita√ß√µes para o servidor.
- **Exemplos**:
    
    ‚ó¶ Clicar em um bot√£o "curtir" e a cor mudar, com um contador somando sem recarregar a p√°gina.
    
    ‚ó¶ Menus que apresentam submenus ao serem clicados.
    
    ‚ó¶ P√°ginas que carregam conte√∫do extra automaticamente ao rolar a barra.
    
    ‚ó¶ Pequenas aplica√ß√µes web como calculadoras e jogos.
    
    ‚ó¶ Validar o preenchimento de par√¢metros em formul√°rios.
    
- **Aplica√ß√µes modernas**: Atualmente, o JavaScript √© adotado em diversos contextos, como o **Node.Js** (implementa√ß√£o para execu√ß√£o fora do navegador, popular para servidores de aplica√ß√µes web) e o framework de desenvolvimento de jogos **Unity**.
- **Integra√ß√£o com HTML5**: No HTML5, o JavaScript √© completamente integrado e consegue facilmente acessar e manipular os elementos HTML da p√°gina.

>üí° **Para saber mais:**
>
>[A hist√≥ria de como ensinamos m√°quinas a pensar](/disciplina/fundamentos-software/aula/7)

## 2. Como adicionar JavaScript

Existem tr√™s formas diferentes de incluir c√≥digo JavaScript no HTML:

### 2.1 Tag script

O JavaScript √© parte integral do HTML5 e n√£o requer instala√ß√£o externa. Basta criar a tag `<script>` e codificar JavaScript em seu conte√∫do.

- **Exemplo**:
    
    ```html
    <!DOCTYPE html>
    <head>
       <title>T√≠tulo</title>
    </head>
    <body>
      <script>
         alert('Ol√° Mundo!');
      </script>
    </body>
    </html>
    ```
    
- **Posicionamento**: A tag <script> pode aparecer tanto no `<head>` quanto no `<body>` e m√∫ltiplas vezes. A **melhor pr√°tica √© coloc√°-la no final do <body>**, pois scripts frequentemente interagem com elementos HTML, e se estiverem no final, garante-se que os elementos HTML j√° foram carregados pelo navegador.

### 2.2 Arquivo externo

O c√≥digo JavaScript √© armazenado em um arquivo separado com extens√£o .js, e o arquivo √© vinculado √† p√°gina HTML. Separar o c√≥digo JavaScript em um arquivo externo √© uma boa pr√°tica de desenvolvimento, pois permite maior organiza√ß√£o, melhor divis√£o de trabalho e a associa√ß√£o de um mesmo arquivo JavaScript a v√°rias p√°ginas HTML, diminuindo retrabalho.

- **Uso**: No HTML, utiliza-se o atributo src (de *source*) dentro da tag <script> para indicar o endere√ßo do arquivo .js (extens√£o comum para JavaScript).
- **Exemplo**:
    
    ‚ó¶ **P√°gina HTML**:
    
    ```html
    <!DOCTYPE html>
    <head>
       <title>T√≠tulo</title>
    </head>
    <body>
       <script src="script.js"> </script>
    </body>
    </html>
    ```
    
    ‚ó¶ **Arquivo script.js**:
    
    ```jsx
    alert('Ola Mundo!');
    ```
    

### 2.3 Propriedades especiais

√â poss√≠vel colocar c√≥digo JavaScript diretamente no HTML dentro de certas **propriedades especiais (eventos)**, como a propriedade `onclick` (que significa "ao clicar"). Essa propriedade se trata de um evento que, como o nome sugere, acontece quando o elemento associado recebe um clique e dispara o c√≥digo associado.

**Exemplo**:

```html
<!DOCTYPE html>
<head>
   <title>T√≠tulo</title>
</head>
<body>
   <p id="p1">Texto original do par√°grafo.</p>
   <button onclick="document.getElementById('p1').innerHTML='Texto novo'">Clique Aqui!</button>
</body>
</html>
```

Neste exemplo, o c√≥digo JavaScript altera o conte√∫do do par√°grafo com id 'p1' ao clicar no bot√£o.

- **Comandos**:
    
    ‚ó¶ `document.getElementById`: Seleciona elementos HTML por seu ID.
    
    ‚ó¶ `.innerHTML`: Indica que o que se deseja manipular √© o conte√∫do dentro da tag do elemento selecionado.
    
    ‚ó¶ `='Texto novo'`: Atribui um novo conte√∫do ao elemento selecionado.
    

## 3. Sintaxe

Este t√≥pico introduz o funcionamento do c√≥digo JavaScript, abordando vari√°veis e desvio de fluxo de c√≥digo. Para facilitar testes, pode-se usar o modo desenvolvedor do navegador (F12 no Google Chrome) e a aba "Console". O comando `console.log()` √© usado para imprimir mensagens para testes e controle (logs).

‚ó¶ Exemplo:

```jsx
console.log("Bom dia");
```

### 3.1 Vari√°veis

- **Defini√ß√£o**: Uma vari√°vel √© um **espa√ßo de mem√≥ria com um nome associado** onde se guarda informa√ß√µes.
- **Atribui√ß√£o**: Um valor pode ser atribu√≠do diretamente ou extra√≠do de um formul√°rio.
    
    ```jsx
    let nome = "Maria";
    console.log(nome);
    
    nome = "Jo√£o";
    console.log(nome);
    ```
    
    Neste exemplo, criamos uma vari√°vel chamada nome, que recebe inicialmente o valor ‚ÄúMaria‚Äù. Essa informa√ß√£o ent√£o √© impressa no console, e depois o valor da vari√°vel √© alterado para ‚ÄúJo√£o‚Äù; o valor antigo se perdeu, e agora, quando a mesma vari√°vel √© impressa novamente, vemos que o valor novo ser√° ‚ÄúJo√£o‚Äù.
    
- **Tipos de Valores**: Vari√°veis podem armazenar diversos tipo de valores, como textos (chamados **strings**) ou valores num√©ricos.
    
    ```jsx
    let nome = "Jo√£o";
    let idade;
    idade = 20;
    idade = idade + 1;
    console.log("Oi " + nome + " sua idade √© " + idade); // Sa√≠da: Oi Jo√£o sua idade √© 21
    ```
    
- **Declara√ß√£o:**
    
    ‚ó¶ **let**: Indica uma **vari√°vel que pode ser alterada**. Usado para valores que ser√£o modificados ao longo da execu√ß√£o, como o total de uma compra.
    
    ‚ó¶ **const**: Indica uma **constante**, cujo valor nunca se altera. Usado para valores que n√£o devem ser modificados, como um login de usu√°rio.
    
    ```jsx
    const login = "maria@login.com";
    login = "joao@login.com"; // Uncaught TypeError: invalid assignment to const 'login'
    ```
    
    Nesse exemplo, a linha final ir√° gerar um erro, pois estamos tentando modificar uma constante.
    

### 3.2 Comando if

- **Defini√ß√£o**: O comando if (se) permite que um bloco de c√≥digo seja executado (ou ignorado) dependendo de uma condi√ß√£o.
    
    ```jsx
    let carteira = 50;
    
    if (carteira < 100) {
    	console.log("n√£o pode comprar");
    } // Sa√≠da: n√£o pode comprar
    ```
    
    Nesse exemplo, caso o valor na carteira seja menor que 100, o c√≥digo entre chaves ser√° executado; do contr√°rio, ele ser√° ignorado.
    
- **else**: Permite criar um bloco de c√≥digo para executar somente quando a condi√ß√£o associada ao if falhar (sen√£o).
    
    ```jsx
    let carteira = 130;
    
    if (carteira < 100) {
    	console.log("n√£o pode comprar");
    } else {
      console.log("pode comprar");
    } // Sada: pode comprar
    ```
    
    O else n√£o requer l√≥gica associada e deve vir imediatamente ap√≥s o bloco do `if`.
    

### 3.3 Comando while

- **Defini√ß√£o**: O comando while (enquanto) √© respons√°vel pela repeti√ß√£o de blocos de c√≥digo. Enquanto a condi√ß√£o associada for verdadeira, o bloco de c√≥digo ser√° executado.
    
    ```jsx
    let quantidadePessoas = 5;
    
    while (quantidadePessoas > 0) {
    	console.log("Bom dia!");
      quantidadePessoas = quantidadePessoas - 1;
    }
    ```
    
    **`quantidadePessoas = quantidadePessoas - 1;`:** Esta linha √© muito importante. Ela **atualiza o valor** da vari√°vel `quantidadePessoas`. A cada vez que o loop roda, `1` √© subtra√≠do de `quantidadePessoas`. Ent√£o, se era `5`, vira `4`, depois vira `3`, e assim por diante, at√© se tornar 0. `0 > 0` √© **falso**, ent√£o a condi√ß√£o n√£o √© mais verdadeira e o loop para de executar.
    

### 3.4 Fun√ß√£o

- **Defini√ß√£o**: Uma fun√ß√£o √© um **"apelido" para um bloco de c√≥digo**, permitindo que ele seja executado sempre que a fun√ß√£o for chamada pelo seu nome. Isso facilita a repeti√ß√£o de blocos de c√≥digo sem necessidade de redigitar tudo.
- **Cria√ß√£o**: Requer a palavra reservada `function`, seguida do nome da fun√ß√£o, par√™nteses para par√¢metros e chaves para o bloco de c√≥digo.
    
    ```jsx
    cumprimentos(); // Sa√≠da: Bom dia Boa tarde Boa noite
    
    function cumprimentos() {
    	console.log("Bom dia");
      console.log("Boa tarde");
      console.log("Boa noite");
    } 
    ```
    

### 3.5 Array

- **Defini√ß√£o**: Arrays servem para **armazenar m√∫ltiplos itens de forma ordenada em uma √∫nica vari√°vel**. √â criada utilizando colchetes [ ], com cada item separado por v√≠rgula. Para acessar ou modificar itens, utiliza-se a posi√ß√£o (√≠ndice) entre colchetes, **iniciando por zero**.
    
    ```jsx
    let capitaisSul = ["Curitiba", "Florian√≥polis", "Porto Alegre"];
    
    console.log([capitaisSul[0]]); // Sa√≠da: Curitiba
    console.log([capitaisSul[1]]); // Sa√≠da: Florian√≥polis
    console.log([capitaisSul[2]]); // Sa√≠da: Porto Alegre
    ```
    

## 4. Eventos

- **Defini√ß√£o**: Uma l√≥gica dentro do JavaScript que permite que um determinado c√≥digo seja executado quando um evento ocorre em um elemento HTML (ex: um clique, passar o mouse).
- **Exemplo (addEventListener)**: O c√≥digo abaixo adiciona um evento de `click` (clique) a um par√°grafo com id="para". Quando o par√°grafo √© clicado, ele executa uma fun√ß√£o que altera seu conte√∫do.
    
    ```html
    <body>
        <p>Par√°grafo com texto 1.</p>
        <p id="para">Par√°grafo com texto 2.</p>
        
        <script>
          let paragrafo = document.querySelector("#para");
          paragrafo.addEventListener("click", trocaTexto);
          function trocaTexto() {
            paragrafo.innerHTML = "conteudo novo";
          }
        </script>
    </body>
    ```
    
    `document.querySelector()`: Seleciona o primeiro elemento HTML compat√≠vel com o par√¢metro especificado.
    
- **Outros tipos de eventos**:
    
    ‚ó¶ **change**: Quando o elemento HTML recebe alguma altera√ß√£o.
    
    ‚ó¶ **mouseover**: Quando o cursor do mouse passa sobre o elemento.
    
    ‚ó¶ **mouseout**: Quando o cursor do mouse sai de sobre o elemento.
    
    ‚ó¶ **load**: Quando o navegador termina de carregar o elemento HTML.
    
    ‚ó¶ **keydown**: Quando o usu√°rio pressiona uma tecla no teclado.
    

## 5. JSON

- **Defini√ß√£o**: O **JSON** √© um formato de texto leve para interc√¢mbio de dados, que √© f√°cil para humanos lerem e escreverem, e f√°cil para m√°quinas analisarem e gerarem. Ele √© derivado da linguagem JavaScript, mas √© **independente de linguagem**, ou seja, pode ser usado por praticamente qualquer linguagem de programa√ß√£o.
- **Para que serve**: Imagine que voc√™ tem um aplicativo no seu celular que mostra o tempo. Ele precisa "conversar" com um servidor que tem as informa√ß√µes do clima. Essa conversa precisa ser em um idioma que ambos entendam. O JSON √© esse idioma.
- **Como funciona**:
    - **Baseado em Objeto/Array:** Os dados s√£o organizados em pares de `chave: valor` (como objetos em JavaScript ou dicion√°rios em Python) e listas de valores (como arrays).
    - **Sintaxe Simples:** Usa uma sintaxe m√≠nima e clara, sem a necessidade de tags de fechamento.

Exemplo:

```json
{
    "titulo": "O Senhor dos An√©is",
    "autor": "J.R.R. Tolkien",
    "anoPublicacao": 1954,
    "generos": [
		"Fantasia",
		"Aventura"
	],
    "disponivel": true
}
```

### 5.1 XML

- **Defini√ß√£o**: XML (Extensible Markup Language) √© outra linguagem de nota√ß√£o de objetos. Funciona de forma parecida com o HTML, usando tags. O atributo vira nome da tag e o valor √© o conte√∫do da tag.

Exemplo:

```xml
<livro>
	<titulo>O Senhor dos An√©is</titulo>
	<autor>J.R.R. Tolkien</autor>
	<anoPublicacao>1954</anoPublicacao>
	<generos>
		<genero>Fantasia</genero>
		<genero>Aventura</genero>
	</generos>
	<disponivel>true</disponivel>
</livro>
```

- **Compara√ß√£o com JSON**: Ambos servem para a mesma finalidade: **organizar dados de forma estruturada para que possam ser facilmente lidos e entendidos por programas de computador.** Em resumo, enquanto **XML** √© um formato mais antigo e robusto, com forte foco em valida√ß√£o e flexibilidade de tags, **JSON** √© o favorito atual devido √† sua simplicidade, leveza e facilidade de uso em ambientes web modernos e APIs. A escolha entre um e outro geralmente depende dos requisitos espec√≠ficos do projeto e dos sistemas com os quais voc√™ precisa interagir.

![image.png](/images/divider2.png)

## Perguntas

1. Explique a origem e a evolu√ß√£o do nome JavaScript. Qual a sua rela√ß√£o com a linguagem Java?
2. Descreva o papel principal do JavaScript antes de sua ado√ß√£o generalizada e como ele revolucionou a intera√ß√£o em p√°ginas web est√°ticas.
3. Quais s√£o as tr√™s principais formas de incorporar c√≥digo JavaScript em um arquivo HTML? Mencione uma boa pr√°tica para uma dessas formas.
4. Explique o conceito de "vari√°vel" em JavaScript e a diferen√ßa entre var, let e const.
5. Como o comando if controla o fluxo de execu√ß√£o do c√≥digo em JavaScript? D√™ um exemplo pr√°tico de seu uso.
6. Para que serve o comando while em JavaScript? Descreva como ele funciona para repetir blocos de c√≥digo.
7. O que √© uma "fun√ß√£o" em JavaScript e qual sua principal vantagem? Como os par√¢metros s√£o utilizados em fun√ß√µes?
8. Descreva o conceito de array em JavaScript. Como os elementos de um array s√£o acessados?
9. O que s√£o "eventos" em JavaScript e como eles permitem a intera√ß√£o com elementos HTML? Cite dois exemplos de eventos.
10. O que √© JSON e qual sua principal finalidade? Como ele se compara ao XML como linguagem de nota√ß√£o de objetos?

![image.png](/images/divider2.png)

## Aula pr√°tica

**Exerc√≠cio 1**: Crie um bot√£o que muda de cor com o seguinte padr√£o: Seu fundo deve ser azul quando o mouse estiver afastado, verde quando estiver sobre o bot√£o e vermelho, exibindo a mensagem ‚Äúquebrei‚Äù, quando clicado. Depois de ‚Äúquebrado‚Äù, ele n√£o deve mais modificar.
Dica: document.getElementById("p2").style.backgroundColor="blue";

```html
<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button id="botao">Me clique</button>

    <script>
      let botao = document.querySelector("#botao");
      let estaQuebrado = false;

      botao.style.background="aqua";

      botao.addEventListener("mouseover",e => {
        if(estaQuebrado===false)
        botao.style.background="green";
      });
      
      botao.addEventListener("mouseout",e => {
        if(estaQuebrado===false)
        botao.style.background="aqua";
      });

      botao.addEventListener("click",e => {
        botao.style.background="red";
        botao.innerHTML="quebrei";
        estaQuebrado = true;
      })
    </script>
  </body>
</html>
```

**Exerc√≠cio 2:** Crie uma calculadora com as quatro opera√ß√µes b√°sicas utilizando JavaScript. Utilize dois campos input para o preenchimento dos valores, um campo select para a sele√ß√£o da opera√ß√£o desejada, um campo div para resposta e um button para solicitar o c√°lculo.

```html
<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    N√∫mero 1: <input id="num1" type="text"> <br>
    N√∫mero 2: <input id="num2" type="text"> <br>
    <select id="operacoes">
      <option value="somar">Somar</option>
      <option value="subtrair">Subtrair</option>
      <option value="multiplicar">Multiplicar</option>
      <option value="dividir">Dividir</option>
    </select>
    <button id="calcular">Calcular</button>
    <div id="resultado"></div>
    <script>
      const num1 = document.querySelector("#num1");
      const num2 = document.querySelector("#num2");
      const operacoes = document.querySelector("#operacoes");
      const btnCalcular = document.querySelector("#calcular");
      let resultado = document.querySelector("#resultado");

      calcular.addEventListener("click",calcular);

      function calcular() {
        const valor1 = Number(num1.value);
        const valor2 = Number(num2.value);
        const operacao = operacoes.value;
        if (operacao === "somar") {
          resultado.innerHTML = valor1 + valor2;
        } else if (operacao === "subtrair") {
          resultado.innerHTML = valor1 - valor2;
        } else if (operacao === "multiplicar") {
          resultado.innerHTML = valor1 * valor2;
        } else if (operacao === "dividir") {
          resultado.innerHTML = valor1 / valor2;
        }
      }
    </script>
  </body>
</html>
```

**Exerc√≠cio 3:** Modifique a calculadora do exerc√≠cio anterior removendo o bot√£o e fazendo com que qualquer altera√ß√£o de valor em qualquer um dos campos fa√ßa a resposta ser automaticamente calculada.

```html
<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    N√∫mero 1: <input id="num1" type="text" /> <br />
    N√∫mero 2: <input id="num2" type="text" /> <br />
    <select id="operacoes">
      <option value="somar">Somar</option>
      <option value="subtrair">Subtrair</option>
      <option value="multiplicar">Multiplicar</option>
      <option value="dividir">Dividir</option>
    </select>
    <div id="resultado"></div>
    <script>
      const num1 = document.querySelector("#num1");
      const num2 = document.querySelector("#num2");
      const operacoes = document.querySelector("#operacoes");
      let resultado = document.querySelector("#resultado");

      operacoes.addEventListener("change", calcular);
      num1.addEventListener("input", calcular);
      num2.addEventListener("input", calcular);

      function calcular() {
        if (num1.value === "" || num2.value === "") {
          resultado.innerHTML = "Preencha todos os campos";
        } else {
          const valor1 = Number(num1.value);
          const valor2 = Number(num2.value);
          const operacao = operacoes.value;
          if (operacao === "somar") {
            resultado.innerHTML = valor1 + valor2;
          } else if (operacao === "subtrair") {
            resultado.innerHTML = valor1 - valor2;
          } else if (operacao === "multiplicar") {
            resultado.innerHTML = valor1 * valor2;
          } else if (operacao === "dividir") {
            resultado.innerHTML = valor1 / valor2;
          }
        }
      }
    </script>
  </body>
</html>
```